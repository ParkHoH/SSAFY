<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Customer">
	<resultMap type="Customer" id="joinResult">
		<result column="empid" property="num"/>
		<result column="fname" property="name"/>
		<result column="deptname" property="address"/>
	</resultMap>

	<select id="select1" parameterType="joinResult">
		select empid, fname, deptid
		from emp
		where empid = 50
		<if test="fname != null">
			and fname like concat('%', #{fname}, '%')
		</if>
	</select>

	<select id="select2" parameterType="map" resultMap="joinResult">
		select * from emp
		<if test="deptid != null">
			where deptid = #{deptid}
		</if>
		<if test="jobid != null">
			where jobid = #{jobid}
		</if>
	</select>

	<select id="select3" resultMap="joinResult">
		select * from empid, fname, deptid
		from emp
		where deptid in (
			<foreach collection="array" separator="," item="itemx" >
				#{itemx}
			</foreach>
		)
	</select>
	
	<select id="join" resultType="Customer">
		select e.empid empid, e.fname fname, d.deptname deptname
		from emp e, dept d
			where e.deptid is not null 
			and e.deptid = d.deptid
	</select>
	
	<select id="selectAll" resultType="Customer">
		select * from customer
	</select>
	
	<select id="selectOne" parameterType="String" resultType="Customer">
		select * from customer where num = #{num}
	</select>
	
	<select id="selectAddress" parameterType="String" resultType="Customer">
		select * from customer where address = #{address}
	</select>
	
	<select id="insert">
		insert into customer values (#{num}, #{name}, #{address})
	</select>
	
	<select id="delete">
		delete from customer where num = #{num}
	</select>
	
	<select id="update">
		update customer set name = "hh" where name = #{name} 
	</select>
</mapper>